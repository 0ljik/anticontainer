{
	"type": "sandbox",
	"ns": "downthemall.net",
	"prefix": "tumblr.com post",
	"match": "^http://(.+\\.)?tumblr\\.com/post/",
	"keepReferrer": true,
	"resolve": "(function() {\n    try {\n        var ogI = responseText.match(/<meta property=\"og:image\" content=\"(.+?)\"/i),\n            type = responseText.match(/<meta property=\"og:type\" content=\"(?:.+?:)?(.+?)\"/i)[1],\n            obj = responseText.match(/<script.*?type=\"application\\/ld\\+json\">(.+?)<\\/script>/i),\n            url = null,\n            name = null;\n        if(!!obj && !!obj[1]) {\n            obj = JSON.parse(obj[1]);\n            var obT = typeof obj.image;\n            if(obT === \"string\") {\n                queueDownload(obj.image);\n            }\n            else if(obT === \"object\") {\n                for(var i of obj.image[\"@list\"])\n                    queueDownload(i);\n            }\n            if(type === \"video\") {\n                name = \"tumblr_\" + ogI[1].match(/\\/tumblr_([a-zA-Z0-9]+)_frame/)[1];\n                url = \"https://www.tumblr.com/video_file/\" + baseURL.match(/\\/post\\/([0-9]+)/)[1] + \"/\" + name;\n                name = name + \".mp4\";\n            }\n            else {\n                throw new Error(\"Media not located in object.\");\n            }\n        }\n        else if(!!ogI && !!ogI[1]) {\n            url = ogI[1];\n        }\n        else {\n            throw new Error(\"Media not located in page.\");\n        }\n        setURL(url, name);\n    }\n    catch (e) { log(e.message); }\n    finally { finish(); }\n})();"
}